<div id="grid_wraper_monitoring_cost_budget">
	<div id="grid_search_monitoring_cost_budget">
		<div class="full_colums">
			<div class="top_form_head">									
				<span class="form_head top-head-content"> <!--  img class="img_search " src="http://localhost/ERPCore/application/views/themes/default/assets/images/Search-icon.png" /--> Search Form Monitoring KPI </span>
				<!--  span class="top-icon ui-icon ui-icon-carat-1-s"></span-->
			</div> 
			<div class="clear"></div>
			<div style="overflow:auto;" class="content-table">
				<div class="left_colums2">
					<div class="form_horizontal_plc">
						<div class="rows_group">
							<label for="monitoring_cost_tglAwal" class="rows_label">Periode</label>
							<div class="rows_input">
								<input type="text" id="monitoring_cost_budget_tglAwal" size="10" ftype="varchar" label="Tgl Awal" value="" name="monitoring_cost_tglAwal">
							</div>
						</div>
					</div>
				</div>
				<div class="right_colums2">
					<div class="form_horizontal_plc">
						<div class="rows_group">
							<label for="monitoring_cost_tglAkhir" class="rows_label">s / d</label>
							<div class="rows_input">
								<input type="text" id="monitoring_cost_budget_tglAkhir" size="10" ftype="text" label="Tgl Akhir" value="" name="monitoring_cost_tglAkhir">
							</div>
						</div>					
					</div>
				</div>			
				<div class="clear"></div>
				<div class="control-group-btn">
					<div class="left-control-group-btn">
						<button id="btn_print_xl_monitoring_cost_budget" class="icon-save ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary"  type="button"  role="button" aria-disabled="false">
							<span class="ui-button-icon-primary ui-icon ui-icon-save"></span>
							<span class="ui-button-text">Print to Excel</span>
						</button>
					</div>
					<div class="left-control-group-btn">
						<button id="btn_print_pdf_monitoring_cost_budget" class="icon-save ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary"  type="button"  role="button" aria-disabled="false">
							<span class="ui-button-icon-primary ui-icon ui-icon-save"></span>
							<span class="ui-button-text">Print to PDF</span>
						</button>
					</div>
					<div class="left-control-group-btn">
						<button id="btn_search_monitoring_cost_budget" class="icon-search ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary"  type="button"  role="button" aria-disabled="false">
							<span class="ui-button-icon-primary ui-icon ui-icon-search"></span>
							<span class="ui-button-text">Preview</span>
						</button>
					</div>
				</div>
			</div>								
		</div>		
	</div>
</div>
	<div class="clear"></div>
	<div class="grid-list">
		<div style="padding-right: 30px;overflow:auto;" class="boxContent">
			<div class="ui-jqgrid ui-widget ui-widget-content ui-corner-all ui-resizable" id="gbox_grid_monitoring_cost" dir="ltr" style="width: 1064px;">
				<div id="lui_grid_monitoring_cost" class="ui-widget-overlay jqgrid-overlay"></div>
				<div id="load_grid_monitoring_cost" class="loading ui-state-default ui-state-active" style="display: none;">Loading...</div>
				<div class="ui-jqgrid-view" id="gview_grid_monitoring_cost" style="width: 1064px;">
					<div class="ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix">
					<a href="javascript:void(0)" role="link" class="ui-jqgrid-titlebar-close HeaderButton" style="right: 0px;">
						<span class="ui-icon ui-icon-circle-triangle-n"></span>
					</a>
						<span class="ui-jqgrid-title">List Monitoring KPI</span>
					</div>

					<div style="width: 1064px;" class="ui-state-default ui-jqgrid-hdiv">
					<div class="ui-jqgrid-hbox">
					<table cellspacing="0" cellpadding="0" border="0" style="width: 100%;" id="grid_monitoring_cost" tabindex="1" role="grid" aria-multiselectable="false" aria-labelledby="gbox_grid_master_category" class="ui-jqgrid-btable">
						
						<thead>
						<tr role="rowheader" class="ui-jqgrid-labels">
							<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" id="grid_master_parameter_rn" style="width: 3%;">
							<div id="jqgh_grid_master_parameter_rn">View
							</div>
							</th>

							<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" id="grid_monitoring_cost_view" style="width: 27px;">
								<span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize;">&nbsp;</span>
									<div id="jqgh_grid_monitoring_cost_view" class="ui-jqgrid-sortable">No
										<span style="display:none" class="s-ico">
											<span class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc">
										</span>
									</div>
								</span>
							</th>


							<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" id="grid_monitoring_cost_view" style="width: 15%;">
								<span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize;">&nbsp;</span>
									<div id="jqgh_grid_monitoring_cost_view" class="ui-jqgrid-sortable">Category
										<span style="display:none" class="s-ico">
											<span class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc">
										</span>
									</div>
								</span>
							</th>
							<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" id="grid_monitoring_cost_view" style="width: 70%;">
								<span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize;">&nbsp;</span>
									<div id="jqgh_grid_monitoring_cost_view" class="ui-jqgrid-sortable">Parameter
										<span style="display:none" class="s-ico">
											<span class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc">
										</span>
									</div>
								</span>
							</th>
							<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" id="grid_monitoring_cost_view" style="width: 5%;">
								<span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize;">&nbsp;</span>
									<div id="jqgh_grid_monitoring_cost_view" class="ui-jqgrid-sortable">Nilai
										<span style="display:none" class="s-ico">
											<span class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc">
										</span>
									</div>
								</span>
							</th>
							<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader" id="grid_monitoring_cost_view" style="width: 5%;">
								<span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize;">&nbsp;</span>
									<div id="jqgh_grid_monitoring_cost_view" class="ui-jqgrid-sortable">UOM
										<span style="display:none" class="s-ico">
											<span class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc">
										</span>
									</div>
								</span>
							</th>
						</tr>
						</thead>

						<tbody id="tbody_monitoring_cost_budget">
						
							
						</tbody>
					</table>
					</div>
				</div>
				</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="clear"></div>

<!--Append saat click detail -->
<div id="partial_budget" style="margin-top:20px;"> </div>



<script type="text/javascript">
<?php $url_header = base_url()."processor/plc/monitoring/cost/budget/?action=getheader"; ?>
	$('#btn_search_monitoring_cost_budget').click( function  () {
		$('#partial_budget').html('');
		var tglAwal = $('#monitoring_cost_budget_tglAwal').val();
		var tglAkhir = $('#monitoring_cost_budget_tglAkhir').val();
		
		if (tglAkhir == '' || tglAwal=='') {

			alert('Periode tidak boleh kosong');
		}else{
			return $.ajax({
			url: '<?php echo $url_header;?>',
			type: 'post',
			//dataType : "json",
			data: {
					tglAwal: tglAwal,
					tglAkhir: tglAkhir,
					},
			//data: $(this).attr('id'),
			beforeSend: function(){


			},
			success: function(data){
				$('#tbody_monitoring_cost_budget').html(data);
			},
			}).responseText;	
		};
		
	
	});

</script>


<script type="text/javascript">
	function openWindow(url) {
		window.open (url, "Print","status=1,toolbar=1,menubar=1,resizable=1,height=250,width=350");
	}

<?php $url_print = base_url()."processor/plc/monitoring/cost/budget/?action=printto"; ?>
	$('#btn_print_xl_monitoring_cost_budget').click( function  () {
		var $tglAwal = $('#monitoring_cost_budget_tglAwal').val();
		var $tglAkhir = $('#monitoring_cost_budget_tglAkhir').val();
		var $extention = 'xls';
		
		if ($tglAkhir == '' || $tglAwal=='') {

			alert('Periode tidak boleh kosong');
		}else{
			<?php $base_print = base_url()."processor/plc/monitoring/cost/budget/?action=printto"; ?>
			var $url_print = '<?php echo $url_print;?>'+'&_ext='+$extention+'&_tglAwal='+$tglAwal+'&_tglAkhir='+$tglAkhir;
			openWindow($url_print);
		};
		
	
	});


	$('#btn_print_pdf_monitoring_cost_budget').click( function  () {
		var $tglAwal = $('#monitoring_cost_budget_tglAwal').val();
		var $tglAkhir = $('#monitoring_cost_budget_tglAkhir').val();
		var $extention = 'pdf';
		
		if ($tglAkhir == '' || $tglAwal=='') {

			alert('Periode tidak boleh kosong');
		}else{
			<?php $base_print = base_url()."processor/plc/monitoring/cost/budget/?action=printto"; ?>
			var $url_print = '<?php echo $url_print;?>'+'&_ext='+$extention+'&_tglAwal='+$tglAwal+'&_tglAkhir='+$tglAkhir;
			openWindow($url_print);
		};
		
	
	});

</script>


<?php $url = base_url()."processor/plc/monitoring/cost/budget/?action=get_detail"; ?>
<script type="text/javascript">
		
	$('.detail_monitoring_cost_bt').click( function  () {
		if ($(this).attr('tglAwal') == '' || $(this).attr('tglAkhir')=='') {

			alert('Periode tidak boleh kosong');
		}else{
			return $.ajax({
			url: '<?php echo $url;?>',
				type: 'post',
				//dataType : "json",
				data: {
						parameter: $(this).attr('idparameter'),
						uom: $(this).attr('uom'),
						tglAwal: $(this).attr('tglAwal'),
						tglAkhir: $(this).attr('tglAkhir'),
						},
				//data: $(this).attr('id'),
				beforeSend: function(){
				},
				success: function(data){
					alert('lol');
					$('#partial_budget').html(data);
				},
			}).responseText;	
		};

		
	});

	$('#monitoring_cost_budget_tglAwal').datepicker({dateFormat:'yy-mm-dd'});
	$('#monitoring_cost_budget_tglAkhir').datepicker({dateFormat:'yy-mm-dd'});
</script>
	
